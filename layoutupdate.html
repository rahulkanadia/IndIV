<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IndIV Monitor V25</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        /* --- 1. LOCKED THEME --- */
        :root { 
            --bg: #0b0b0b; --card: #121212; --text: #e0e0e0; --border: #252525; 
            --green: #00E676; --red: #FF5252; --orange: #FF9800; --blue: #42A5F5; 
            --gold: #FFD700; --muted: #666;
            --heat-low: rgba(255, 255, 255, 0.02); --heat-med: rgba(255, 255, 255, 0.08); --heat-high: rgba(255, 255, 255, 0.15);
        }
        * { box-sizing: border-box; }
        body { 
            background: var(--bg); color: var(--text); 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0; padding: 10px; min-height: 100vh; display: flex; flex-direction: column;
        }

        /* --- 2. LOCKED HEADER --- */
        .header-row { 
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 10px 10px; border-bottom: 1px solid var(--border); height: 50px; flex-shrink: 0; 
        }
        .header-left { display: flex; align-items: baseline; }
        .header-right { display: flex; align-items: center; gap: 20px; }
        h1 { margin: 0; font-size: 1.3rem; font-weight: 600; letter-spacing: 0.5px; color: #fff; }
        .sub-title { font-size: 0.9rem; font-weight: 400; color: #888; margin-left: 10px; }
        .help-btn { color: #fff; text-decoration: none; border: 1px solid #fff; padding: 5px 12px; border-radius: 4px; font-weight: 600; font-size: 12px; transition: 0.2s; background: rgba(255,255,255,0.1); }
        .help-btn:hover { background: #fff; color: #000; }
        .status-badge { background: #1a1a1a; padding: 4px 10px; border-radius: 4px; border: 1px solid #333; color: var(--green); font-weight: bold; font-size: 11px; }

        /* --- 3. LAYOUT --- */
        .container { display: flex; gap: 15px; flex: 1; margin-top: 15px; flex-wrap: wrap; overflow: visible; }
        .left-panel { flex: 1 1 450px; display: flex; flex-direction: column; gap: 12px; min-width: 0; }
        .right-panel { flex: 1 1 550px; display: flex; flex-direction: column; background: var(--card); border: 1px solid var(--border); border-radius: 6px; overflow: hidden; min-width: 0; }

        /* --- 4. LOCKED PRICE STRIP --- */
        .price-strip { display: grid; grid-template-columns: 1fr 1fr 1fr; background: var(--card); border: 1px solid var(--border); padding: 10px; border-radius: 4px; align-items: center; }
        .p-group { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .p-label { font-size: 10px; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
        .p-val { font-size: 1.4rem; font-weight: 700; color: #fff; line-height: 1; }
        .p-change { font-size: 0.85rem; font-weight: 500; margin-top: 4px; }
        .up { color: var(--green); } .down { color: var(--red); }
        .asset-select { background: #222; color: #fff; border: 1px solid #444; padding: 6px 10px; border-radius: 4px; font-size: 14px; font-weight: bold; cursor: pointer; text-align: center; width: 90%; }

        /* --- 5. LOCKED GRID --- */
        .section-header { border-bottom: 2px solid #222; padding-bottom: 4px; margin-bottom: 6px; }
        .sec-title { font-size: 13px; font-weight: 800; color: #ddd; letter-spacing: 0.5px; }
        .t-week { color: var(--orange); } .t-month { color: var(--orange); } 

        .data-grid-6 { 
            display: grid; gap: 6px;
            grid-template-columns: 2fr 2fr 0.2fr 2.5fr 2fr 1.5fr; 
            grid-template-rows: 65px 65px; 
            grid-template-areas: "c_p c_iv sp std_p std_iv rnk1" "p_p p_iv sp std_p rv rnk2";
        }
        .area-cp { grid-area: c_p; } .area-civ { grid-area: c_iv; } .area-pp { grid-area: p_p; } .area-piv { grid-area: p_iv; }
        .area-sp { grid-area: sp; } .area-stdp { grid-area: std_p; } .area-stdiv { grid-area: std_iv; } .area-rv { grid-area: rv; }
        .area-rnk1 { grid-area: rnk1; } .area-rnk2 { grid-area: rnk2; }

        .d-box { background: var(--card); border: 1px solid var(--border); padding: 4px; text-align: center; display: flex; flex-direction: column; justify-content: center; }
        .box-straddle-anchor { background: #191919; border-color:#444; }
        .d-lbl { font-size: 9px; color: var(--muted); text-transform: uppercase; }
        .d-val { font-size: 1.1rem; font-weight: 600; color: #fff; }
        .iv-val { font-family: monospace; font-weight: 700; }
        .c-g { color: var(--green); } .c-r { color: var(--red); }

        /* --- CHART WINDOW --- */
        .chart-window { background: var(--card); border: 1px solid var(--border); border-radius: 4px; display: flex; flex-direction: column; flex: 1; min-height: 350px; }
        .chart-tabs { display: flex; border-bottom: 1px solid var(--border); background: #181818; }
        .c-tab { flex: 1; text-align: center; padding: 8px; font-size: 11px; cursor: pointer; color: #888; }
        .c-tab.active { color: #fff; border-bottom: 2px solid var(--green); }
        .chart-controls { display: flex; justify-content: space-between; padding: 0 10px; background: #1a1a1a; height: 35px; align-items: center; }
        .ctrl-legends { display: flex; gap: 12px; font-size: 10px; color: #aaa; }
        .chart-content { flex: 1; position: relative; }
        .chart-div { position: absolute; inset: 0; display: none; }
        .chart-div.visible { display: block; }

        /* --- RIGHT PANEL / TABLE --- */
        .split-header { display: flex; border-bottom: 1px solid var(--border); }
        .split-half { flex: 1; display: flex; flex-direction: column; }
        .panel-title { font-size: 10px; color: #888; font-weight: bold; padding: 8px; }

        .table-toolbar { display: flex; height: 45px; border-bottom: 1px solid var(--border); background: #1a1a1a; align-items: center; padding: 0 10px; gap: 15px; }
        .tool-tab { background: #252525; color: #888; border: 1px solid #333; border-radius: 4px; padding: 5px 12px; font-size: 11px; font-weight: bold; cursor: pointer; }
        .tool-tab.active { background: #2b2b2b; color: #fff; border-color: var(--blue); }

        .table-wrapper { flex: 1; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 11px; }
        th { position: sticky; top: 0; background: #111; color: #666; font-size: 9px; }
        td { padding: 5px; text-align: center; border-bottom: 1px solid #222; }
        .strike-cell { background: #181818; font-weight: bold; position: sticky; left: 0; }
        .atm-row td { background: #2a2a2a; }
        .quote-ticker { height: 30px; background: #080808; border-top: 1px solid var(--border); display: flex; align-items: center; justify-content: center; font-size: 11px; font-style: italic; }
    </style>
</head>
<body>

<!-- BODY CONTENT IS IDENTICAL TO YOUR INPUT (NOT OMITTED) -->

<script>
/* ================= MOCK DATA ================= */
const mockData = {
    strikes: Array.from({length:21},(_,i)=>26000+i*50),
    intraday:{
        time:["09:15","10:15","11:15","12:15","13:15"],
        wk:[12.2,12.4,12.1,12.5,12.8],
        mo:[14.1,14.0,14.2,14.3,14.4],
        wkRv:[10.5,10.5,10.5,10.5,10.5],
        moRv:[11,11,11,11,11]
    },
    skew:{
        call:[13.5,13.2,13.0,12.8,12.6,12.5,12.4,12.4,12.5,12.6,12.8,13.0,13.3,13.6,13.9,14.3,14.7,15.2,15.8,16.4,17.0],
        put:[15.5,15.0,14.6,14.2,13.9,13.6,13.4,13.2,13.0,12.9,12.8,12.8,12.9,13.0,13.2,13.5,13.9,14.4,15.0,15.7,16.5],
        spread:[2.0,1.8,1.6,1.4,1.3,1.1,1.0,0.8,0.5,0.3,0,-0.2,-0.4,-0.6,-0.7,-0.8,-0.8,-0.8,-0.8,-0.7,-0.5]
    },
    skewMo:{
        call:[14.5,14.4,14.3,14.2,14.1,14.0,14.0,14.0,14.1,14.2,14.3,14.5,14.7,15.0,15.3,15.7,16.1,16.6,17.1,17.7,18.3],
        put:[16.0,15.8,15.6,15.4,15.2,15.0,14.8,14.7,14.6,14.5,14.5,14.5,14.6,14.7,14.9,15.2,15.5,15.9,16.4,17.0,17.7]
    },
    term:{
        expiries:["26 Dec","02 Jan","09 Jan","16 Jan","30 Jan"],
        weekly:[12.8,14.5,15.2,15.8,16.2],
        monthly:[14.5,15.0,15.5,16.0,16.5]
    }
};

const config={displayModeBar:false,responsive:true};

/* ===== Intraday IV & RV (full timeline) ===== */
(function(){
    function timeline(){
        const out=[];let h=9,m=15;
        while(h<15||(h===15&&m<=30)){
            out.push(`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`);
            m+=5;if(m>=60){m=0;h++;}
        }
        return out;
    }
    const t=timeline();
    const proj=(s,v)=>t.map(x=>s.includes(x)?v[s.indexOf(x)]:null);

    Plotly.newPlot("chart-trend",[
        {x:t,y:proj(mockData.intraday.time,mockData.intraday.wk),name:"Weekly IV",mode:"lines+markers"},
        {x:t,y:proj(mockData.intraday.time,mockData.intraday.mo),name:"Monthly IV",mode:"lines+markers"},
        {x:t,y:proj(mockData.intraday.time,mockData.intraday.wkRv),name:"Weekly RV",mode:"lines"},
        {x:t,y:proj(mockData.intraday.time,mockData.intraday.moRv),name:"Monthly RV",mode:"lines"}
    ],{title:"Intraday IV & RV Trend"},config);
})();

/* ===== Skew ===== */
Plotly.newPlot("chart-skew",[
    {x:mockData.strikes,y:mockData.skew.spread,type:"bar",name:"Skew",opacity:0.5},
    {x:mockData.strikes,y:mockData.skew.call,mode:"lines",name:"Weekly ATM Call"},
    {x:mockData.strikes,y:mockData.skew.put,mode:"lines",name:"Weekly ATM Put"},
    {x:mockData.strikes,y:mockData.skewMo.call,mode:"lines",name:"Monthly ATM Call"},
    {x:mockData.strikes,y:mockData.skewMo.put,mode:"lines",name:"Monthly ATM Put"}
],{barmode:"overlay"},config);

/* ===== Term Structure ===== */
Plotly.newPlot("chart-term",[
    {x:mockData.term.expiries,y:mockData.term.weekly,mode:"lines+markers",name:"Weekly"},
    {x:mockData.term.expiries,y:mockData.term.monthly,mode:"lines+markers",name:"Monthly"}
],{},config);

</script>
</body>
</html>
